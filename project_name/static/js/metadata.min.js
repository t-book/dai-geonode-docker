"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t){try{JSON.parse(t)}catch(e){return!1}return!0}function e(e){var a=e("#DaiExtendedData").val();if(t(a)){var i=e.parseJSON(a);e(i).each(function(t,a){e.each(a,function(t,a){if("object"===("undefined"==typeof a?"undefined":_typeof(a))){var i=e.map(a,function(t,e){return e+": "+t});i=i.join("<br>"),e("div.more").append("<dt>"+t.replace("[]","")+"</dt><dd>"+decodeURIComponent(i)+"</dd>")}else e("div.more").append("<dt>"+t.replace("[]","")+"</dt><dd>"+decodeURIComponent(a)+"</dd>")})}),e("#DaiJsonData").hide().next("dd").hide(),e(".dl-horizontal dt").css({width:"215px"}),e(".dl-horizontal dd").css({"margin-left":"230px"})}var o=e("dt:contains('Original source scale')").next("dd"),n=o.text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1.");o.text(n);var r=e("dt:contains('Subtitle')"),d=r.next("dd"),s=e("#afterTitle");d.insertAfter(s),r.insertAfter(s);var l=e("dt:contains('Version history')"),c=l.next("dd"),p=e("#afterVersion");c.insertAfter(p),l.insertAfter(p),e("#sprache").hide().next("dd").hide(),e("#dcategory").hide().next("dd").hide(),e("dt:contains('Ausgabe')").html("Version")}jQuery(document).ready(e)}(jQuery),function(t){function e(e){var a=e.serializeArray();for(var i in a)a.hasOwnProperty(i)&&t('[name="'+a[i].name+'"][value="'+a[i].value+'"]').each(function(){t(this).attr("checked",!0)});var o={};if(t.map(a,function(e){t.trim(e.value).length&&(void 0!==o[e.name]?o[e.name].push(e.value):void 0!==e.name&&e.name.indexOf("[]")>-1?o[e.name]=new Array(e.value):o[e.name]=encodeURIComponent(e.value).replace(/'/g,"%27"))}),"Version history[]"in o){if(t.isArray(o["Version history[]"]))for(var n={},r=0;r<o["Version history[]"].length;r++)n["Version "+r]=o["Version history[]"][r];o["Version history[]"]=n,t("#id_resource-edition").val(Object.keys(n).length-1)}return t.isEmptyObject(o)?"":JSON.stringify(o,null,2)}function a(e,a,i,o){o&&""!=e.val()?(e.addClass("inputError").css("color","red"),t("label[for='"+a+"']").css("color:red"),t("label[for='"+a+"']:not(:has(.wrongFormat))").css("color:red")):(e.removeClass("inputError").css("color","#555"),t("label[for='"+a+"'] > span").remove())}function i(e,a){t.each(a,function(e,a){var i=t('[name="'+e+'"]');switch(i.prop("type")){case"radio":case"checkbox":i.each(function(){t(this).attr("value")==a&&t(this).attr("checked",a)});break;default:void 0!==i&&"select"==i.prop("tagName").toLowerCase()&&i.attr("multiple")&&t.isArray(a)&&i.val(a),i.val(decodeURIComponent(a))}})}function o(t){try{JSON.parse(t)}catch(e){return!1}return!0}function n(){t("#div_id_resource-date,#div_id_resource-date_type,#div_id_resource-maintenance_frequency,#div_id_resource-constraints_other,#div_id_resource-language,#div_id_resource-spatial_representation_type,#div_id_resource-temporal_extent_start,#div_id_resource-temporal_extent_end,#div_id_resource-distribution_description,#div_id_resource-data_quality_statement,#div_id_resource-edition,#div_id_resource-distribution_url,#div_id_resource-thumbnail_url,#div_id_resource-license,#div_id_resource-keywords,#div_id_resource-restriction_code_type,#div_id_resource-featured,#div_id_resource-is_published,#div_id_resource-keywords,#div_id_resource-poc,#div_id_resource-metadata_author").hide(),t("label:contains('Kategorie'),label:contains('Category')").parent().parent().hide()}function r(){t("#div_id_resource-title").insertBefore("#DaiSubtitle"),t("#div_id_resource-abstract").insertAfter("#DaiDaitags"),t("#div_id_resource-regions").insertAfter("#DaiStatesOnLayer"),t("#div_id_resource-regions").insertAfter("#DaiStatesOnLayer"),t("#div_id_resource-supplemental_information").insertAfter("#DaiitationLinkiDaiBibliography")}function d(){n(),s.append(l),t("#div_id_resource-title").before(s),t("#id_resource-supplemental_information").attr("readonly","readonly"),t("#id_resource-supplemental_information").attr("data-content","This is an automatically derived JSON representation of this dataset's metadata for internal use."),t("#id_resource-title").attr("data-content","Title for this resource."),t("#id_resource-regions").attr("data-content","Choose one or more regions."),t("#id_resource-purpose").attr("data-content","Summary of the intentions with which the resource(s) was developed."),t("#id_resource-abstract").attr("data-content","Brief narrative summary of the content of the resource(s)"),r(),t(".DaiTitle").css({"margin-bottom":"15px","padding-bottom":"5px","border-bottom":"1px solid #ccc"}),t("div.form-controls").removeClass("col-md-6").addClass("col-md-10");var a=t("#id_resource-supplemental_information").text();if(o(a)){var d=t.parseJSON(a);if(i("div#DAIExtended",d),t("#id_resource-supplemental_information").text(""),d.hasOwnProperty("Version history[]")){var c=t(".versionContainer"),p=0;for(var u in d["Version history[]"]){var m=c.clone();t("input.versionfield",m).val(d["Version history[]"][u]),t("input.versionfield",m).attr("data-id",p),t("p.versionNr",m).html(u),t("#DaiVersion .addVersion").before(m),p+=1}c.remove()}}else{var h=t("#id_resource-supplemental_information").text();t("#AdditionalInfo").val(h)}t(".select2-container-multi .select2-choices .select2-search-choice").css({margin:"5px 0 3px 5px"}),t('input[value="17"]').prop("checked",!0);var v=t("div#DAIExtended input.daiMetaData:not(.inputError),div#DAIExtended select.daiMetaData"),g=e(v);t("#id_resource-supplemental_information").text(g)}var s=t("<div id='DAIExtended'></div>"),l='\n            <div class="form-group DaiTitle"><h3>Title and Description</h3></div>\n            <div class="form-group" id="DaiSubtitle">\n               <label for="subtitle">Subtitle: </label>\n               <div><input id="subtitle" name="Subtitle"  class="daiMetaData form-control has-popover" data-container="body" data-content="Subtitle for this resource." data-html="true" data-placement="right" type="text" maxlength="255" value="" data-reg=".+" data-original-title></div>\n            </div>\n            <div class="form-group" id="DaiAuthors">\n               <label for="DaiAuthors">Author(s) </label>\n               <div><input id="DaiAuthors" name="Author(s)"  class="daiMetaData form-control has-popover" data-container="body" data-content="List all authors and or groups involved in the production of this dataset. Use semicolon (;) to separate entries." data-html="true" data-placement="right" type="text" maxlength="255" value="" data-reg=".+" data-original-title></div>\n            </div>\n            <div class="form-group" id="DaiDataRecordGroup">\n              <label for="DataRecordGroup">Data record group:</label>\n              <div><select id="DataRecordGroup" multiple="multiple" name="Data Record Group[]" class="daiMetaData form-control has-popover" data-container="body" data-content="Working group or project designation of data author(s) if applicable." data-html="true">\n                    <option>none</option> \n                    <option>DAI-Hinkel-Archive</option>\n                    <option>Syrher</option>  \n                  </select>\n              </div>\n            </div>\n            <div class="form-group" id="DaiYearOfCreation">\n               <label for="OriginalProductionDate">Original production date </label>\n               <div><input id="OriginalProductionDate" name="Original production date" class="daiMetaData form-control has-popover" placeholder="2017, 2015-2017, unknown" data-container="body" title="For digital versions of paper originals: Year (or from-to range) of production of original source document(s)." data-html="true" data-placement="right" type="text" data-reg="((1|2)\\d{3}(-(1|2)\\d{3})?|unknown)"></div>\n            </div>\n            <div class="form-group">\n              <label for="CategoryDominant">Category (dominant):</label>\n              <div><select id="DaiCategoryDominant" name="Category (dominant)" class="daiMetaData form-control has-popover" data-container="body" data-content="Main/dominant category of this dataset." data-html="true" data-placement="right" >\n                    <option disabled selected value> -- select an option -- </option>\n                    <option>Archaeology</option>\n                    <option>(Archaeo-)Pedology/Botany/Zoology</option>\n                    <option>Historical/Political</option> \n                    <option>Topography/Hydrology</option> \n                    <option>Geology/Geomorphology/Geophysics</option> \n                    <option>Remote Sensing/Aerial Imagery</option> \n                    <option>Navigation/Tourism</option> \n                    <option>Cadastre/Infrastructure/Planning</option> \n                    <option>Other</option> \n                </select></div>\n            </div>\n          <div class="form-group">\n            <label for="Daitags">Tags: </label>\n            <select id="Daitags" multiple="multiple" name="Daitags[]" class="has-popover form-control daiMetaData" data-container="body" data-content="Choose one or more tags (contact administrator to create additional ones)." data-html="true" data-placement="right" size="2">\n              <option value="Contains Hand Written Notes">Contains Hand Written Notes</option>\n              <option value="Contains AMS Numbers">Contains AMS Numbers</option>\n            </select>\n          </div>\n            <div class="form-group DaiTitle"><h3>Layer Attributes</h3></div>\n            <div class="form-group" id="DaiOriginalAuthors">\n               <label for="DaiOriginalAuthors">Original author(s)</label>\n               <div><input id="DaiOriginalAuthors" name="Original author(s)"  class="daiMetaData form-control has-popover" data-container="body" data-content="List all persons and/or groups involved in producing the documents on which this dataset is based (such as original maps or airphotos). Use semicolon (;) to separate entries." data-html="true" data-placement="right" type="text" maxlength="255" value="" data-reg=".+" data-original-title></div>\n            </div>\n            <div class="form-group" id="DaiScaleOfSource">\n              <label for="OriginalSourceScale">Original source scale: </label>\n              <div><input id="OriginalSourceScale" name="Original source scale" type="text" data-container="body" data-content="Scale of original data source (e.g.paper map or air photo), as applicable. In case of varying scale, specify dominant/most common scale." data-html="true" data-placement="right"  data-reg="(^1:[0-9]{1,8}$|Not applicable)" placeholder="1:1, 1:500, Not applicable" class="daiMetaData form-control has-popover" /></div>\n            </div>\n            <div class="form-group" id="DaiProjectionOfSource">\n              <label for="osrs">Original spatial reference system: </label>\n              <div><input id="osrs" name="Original spatial reference system (SRS)" type="text" data-container="body" data-content="EPSG code (\'EPSG:<number>) or complete WKT string of spatial reference system used by original data source, as applicable. See: www.spatialreference.org" data-html="true" data-placement="right" data-reg=".+" name="Original spatial reference system (SRS)" class="daiMetaData form-control has-popover" /></div>\n            </div>\n            <div class="form-group" id="DaiStatesOnLayer">\n              <label for="GeographicalCoverage">Geographical coverage: </label>\n              <div><input id="GeographicalCoverage" name="Geographical coverage" type="text" data-container="body" data-content="Political or other entities touched or covered by the extent of this dataset (e.g. names of states, municipalities or landmarks), both present or historical." data-html="true" data-placement="right" data-reg=".+" class="daiMetaData form-control has-popover" /></div>\n            </div>\n            <div class="form-group" id="DaiEstimatedAccuracy">\n              <label for="EstimatedAccuracy">Accuracy (estimated):</label>\n              <div><select id="EstimatedAccuracy" name="Accuracy (estimated)" data-container="body" class="daiMetaData form-control has-popover" data-content="Rough categorization of the locational accuracy of objects in this dataset. In case of varying accuracy, specify worst." data-html="true" data-placement="right">\n                    <option disabled selected value> -- select an option -- </option>\n                    <option>Centimetres or better</option>\n                    <option>Decimetres</option>\n                    <option>Metres</option>\n                    <option>Hundreds of metres</option>\n                    <option>Kilometres or worse</option>\n                    <option>Unknown</option>\n                  </select></div>\n            </div>\n            <div class="form-group" id="DaiVersion"><label>Version history:</label>\n              <div class="versionContainer"><p class="versionNr" style="margin-top:6px;">Version 0: </p>\n              <input id="versionfield" name="Version history[]" class="versionfield daiMetaData form-control has-popover" data-id="0" data-container="body" data-content="Provide a short description of what changed in this version. Also include a date and author information." data-html="true" data-placement="right" type="text" maxlength="255" data-reg=".+" value="Initial upload" data-original-title></div>\n              <button type="button" class="addVersion btn btn-secondary" style="margin-top:15px">+</button>     \n            </div>\n            \n \n          <div class="form-group DaiTitle"><h3>Usage and Links</h3></div>\n            <div class="form-group" id="DaiSignatureIDaiWorld">\n              <label for="SignatureIDaiWorld">iDAI.welt signature: </label>\n              <div><input id="SignatureIDaiWorld" name="iDAI.welt signature"type="text" data-container="body" data-content="Signature IDai World" data-html="true" data-placement="right" data-reg=".+" placeholder="D-DAI-Z-Arch-FWH-4711" class="daiMetaData form-control has-popover" /></div>\n            </div>\n            <div class="form-group" id="DaiCopyrightLicense">\n              <label for="CopyrightLicense">Copyright/license:</label>\n                <div>\n                  <select id="CopyrightLicense" name="Copyright/license" class="daiMetaData form-control has-popover" data-container="body" data-content="Select license for re-use and dissemination of this dataset." data-html="true" data-placement="right">\n                    <option selected>Creative Commons (CC BY)</option>\n                    <option>Unrestricted, public domain</option>\n                    <option>All rights reserved</option>\n                    <option>Other: contact author(s)</option>\n                  </select>\n                </div>\n            </div>\n            <div class="form-group" id="DaiCopyRightLinkiDaiObjects">\n              <label for="CopyRightLinkiDaiobjects">Copyright link (iDAI.objects): </label>\n              <div><input id="CopyRightLinkiDaiobjects" name="Copyright link (iDAI.objects)" type="text" data-container="body" data-container="body" data-content="Copyright Link" data-html="true" placeholder="http://www.example.com" data-reg="https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)" class="daiMetaData form-control has-popover" /></div>\n            </div>\n            <div class="form-group" id="DaiCopyRightLinkiDaiBibliography">\n              <label for="CopyRightLinkiDai_bibliography">Copyright link (iDAI.bibliography): </label>\n              <div><input id="CopyRightLinkiDai_bibliography" name="Copyright link (iDAI.bibliography)" data-content="Copyright Link" data-container="body" data-html="true" type="text" placeholder="http://www.example.com" data-reg="https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)" class="daiMetaData form-control has-popover" /></div>\n            </div>\n            <div class="form-group" id="DaiCitation">\n              <label for="Citation">Citation:</label>\n              <div>\n                <select id="Citation" name="Citation" data-container="body" data-content="Text to use when citing this dataset in published work." data-html="true" class="daiMetaData form-control has-popover">\n                  <option selected>No citation provided</option>\n                  <option>Contact author(s) or DAI.</option>\n                </select></div>\n              </div>\n            <div class="form-group" id="DaiCitationLinkiDaiObjects">\n              <label for="CitationLinkiDai_objects">Citation link (iDAI.objects): </label>\n              <div><input id="CitationLinkiDai_objects" name="Citation link (iDAI.objects)" type="text" data-content="Citation Link" data-container="body" data-html="true" placeholder="http://www.example.com" data-reg="https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)" class="daiMetaData form-control has-popover" /></div>\n            </div>\n            <div class="form-group" id="DaiitationLinkiDaiBibliography">\n              <label for="CitationLinkiDai_bibliography">Citation link (iDAI.bibliography): </label>\n              <div><input id="CitationLinkiDai_bibliography" name="Citation link (iDAI.bibliography)" type="text" data-container="body" data-content="Citation Link" data-html="true" placeholder="http://www.example.com" data-reg="https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)" class="daiMetaData form-control has-popover" /></div>\n            </div>\n   ';t(document).on("keyup change",".daiMetaData",function(){var i=t(this),o=i.attr("id"),n=i.val(),r=i.data("reg"),d=new RegExp(r);d.test(n)?a(i,o,n,!1):a(i,o,n,!0);var s=t("div#DAIExtended input.daiMetaData:not(.inputError),div#DAIExtended select.daiMetaData"),l=e(s);t("#id_resource-supplemental_information").text(l)}),t(document).on("click",".addVersion",function(){var e=t("div#DaiVersion div.versionContainer:last");if(""!==t("input",e).val()){var a=e.clone().insertAfter(e),i=Number(e.find("input").attr("data-id"))+1;a.find(".versionNr").html("Version "+i),a.find("input").attr("data-id",i).val("")}else alert("Please fill in the version information first!")}),jQuery(document).ready(d)}(jQuery);
